<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Eventify - Eventos</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'style.css' %}">
</head>

<body>


  <header>
    <a href="{% url 'index' %}">
      <img src="{% static 'images/logo.png' %}" alt="Eventify Logo" class="logo">
    </a>

    <div class="menu-toggle" id="menu-toggle">
      ☰
    </div>

    <nav id="nav-menu">
      <a href="{% url 'eventos' %}">EVENTOS</a>
      <a href="{% url 'meuseventos' %}">MEUS EVENTOS</a>
      <a href="{% url 'certificados' %}">MEUS CERTIFICADOS</a>
      {% if usuario.perfil == 'organizador' %}
      <a href="{% url 'criar_evento' %}" style="background-color: #f8e08e;">CRIAR EVENTO</a>
      {% endif %}
      <a href="{% url 'perfil' %}">PERFIL</a>
      <a href="{% url 'logout' %}">SAIR</a>
    </nav>
  </header>


  <div class="container">
    <section class="eventos">
      <h2>Meus Eventos</h2>

      {% if messages %}
      <div class="messages" style="margin-bottom: 20px;">
        {% for message in messages %}
        <p
          style="color: {% if message.tags == 'error' %}red{% elif message.tags == 'warning' %}#b8860b{% else %}green{% endif %}; text-align: center; margin-bottom: 10px; font-weight: bold; background: #fff; padding: 10px; border-radius: 10px;">
          {{ message }}
        </p>
        {% endfor %}
      </div>
      {% endif %}


      {% for evento in eventos_lista %}
      <div class="evento">
        <div class="dia">{{ evento.data_inicio.day }}</div>
        <h3>{{ evento.tipo }}</h3>
        <p>
          <strong>Local:</strong> {{ evento.local }} <br>
          <strong>Data Fim:</strong> {{ evento.data_fim }}
        </p>

        <div class="acoes">
          {% if evento.data_fim < hoje %}
          <a href="{% url 'gerar_certificado' evento.id %}" class="certificadopronto">GERAR CERTIFICADO</a>

          {% else %}
          <a href="{% url 'cancelar_inscricao' evento.id %}" class="btn-cancelar"
             onclick="return confirm('Tem certeza que deseja cancelar sua inscrição neste evento?');">
            CANCELAR INSCRIÇÃO
          </a>
          {% endif %}

        </div>
      </div>
      {% endfor %}

      {% if not eventos_lista %}
      <div class="evento">
        <h3>Você ainda não se inscreveu em nenhum evento.</h3>
        <p>Visite a página <a href="{% url 'eventos' %}">Eventos</a> para se inscrever!</p>
      </div>
      {% endif %}


    </section>

    <aside class="calendario">
      <h3>SETEMBRO</h3>
      <table>
        <tr>
          <th>Su</th>
          <th>Mo</th>
          <th>Tu</th>
          <th>We</th>
          <th>Th</th>
          <th>Fr</th>
          <th>Sa</th>
        </tr>
        <tr>
          <td></td>
          <td>1</td>
          <td>2</td>
          <td>3</td>
          <td class="hoje">4</td>
          <td>5</td>
          <td>6</td>
        </tr>
        <tr>
          <td>7</td>
          <td>8</td>
          <td class="hoje">9</td>
          <td>10</td>
          <td>11</td>
          <td>12</td>
          <td>13</td>
        </tr>
        <tr>
          <td>14</td>
          <td>15</td>
          <td>16</td>
          <td>17</td>
          <td>18</td>
          <td>19</td>
          <td>20</td>
        </tr>
        <tr>
          <td>21</td>
          <td>22</td>
          <td>23</td>
          <td>24</td>
          <td>25</td>
          <td class="hoje">26</td>
          <td>27</td>
        </tr>
        <tr>
          <td>28</td>
          <td>29</td>
          <td>30</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </table>
    </aside>
  </div>
</body>

<script>
  const menuToggle = document.getElementById('menu-toggle');
  const navMenu = document.getElementById('nav-menu');

  menuToggle.addEventListener('click', () => {
    navMenu.classList.toggle('active');
  });
</script>

</html>